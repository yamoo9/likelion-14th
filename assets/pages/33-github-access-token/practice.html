<!DOCTYPE html>
<html lang="ko-KR">
<head>
  <meta charset="UTF-8" />
  <title>GitHub ì¸ì¦ ì‹¤ìŠµ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>

  <main>
    <h1>ğŸ“¦ ë‚´ GitHub ì €ì¥ì†Œ ëª©ë¡ ë³´ê¸°</h1>
    <form>
      <label for="github-personal-access-token">GitHub ê°œì¸ ì—‘ì„¸ìŠ¤ í† í°</label>
      <input
        type="text" 
        id="github-personal-access-token" 
        placeholder="GitHub ê°œì¸ ì—‘ì„¸ìŠ¤ í† í° ì…ë ¥"
        size="60"
      />
      <button type="submit">ì €ì¥ì†Œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°</button>
    </form>
    <ul data-id="repoList"></ul>
  </main>

  <script>
    // ì—¬ê¸°ì— ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
    {
      const GITHUB_ENDPOINT = 'https://api.github.com/user/repos'
      // const GITHUB_ENDPOINT = 'https://api.github.com/users/yamoo9/repos'
      const repoList = document.querySelector('[data-id="repoList"]')
      const form = document.querySelector('form')

      form.addEventListener('submit', (e) => {
        e.preventDefault()

        const form = e.currentTarget
        const [tokenInput] = form.elements
        const token = tokenInput.value.trim()
        // console.log(token)
        
        fetchGitHubUserRepos(token)
          .then((data) => {
            console.log(data)
            // renderRepos(data)
          })

        form.reset()
      })

      function fetchGitHubUserRepos(token) {
        return fetch(GITHUB_ENDPOINT, {
          method: 'POST',
        })
          .then((response) => response.json())
          .catch(console.error)
      }

      function renderRepos(data) {
        console.log(repoList, data)
      }

    }
  </script>
</body>
</html>