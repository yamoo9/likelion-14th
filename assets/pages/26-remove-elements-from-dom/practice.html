<!DOCTYPE html>
<html lang="ko-KR">

  <head>
    <title>DOMì—ì„œ ìš”ì†Œ ì œê±°</title>
    <style>
      [id^="practice"] {
        display: flex;
        flex-flow: column;
        align-items: start;
        gap: 12px;
        padding: 12px;

        * {
          margin-block: 0;
        }
      }

      h2 {
        font-size: 1.2rem;
      }

      hr {
        margin-block: 20px;
        margin-inline: 12px;
        border: 0;
        border-block-end: 1px solid #aaa;
      }

      .members, .reviews {
        list-style-type: '';
        padding-inline-start: 0;
        display: grid;
        gap: 8px;
        inline-size: calc(100vw - 64px);

        li {
          display: flex;
          justify-content: space-between;
          align-items: center;
          inline-size: inherit;
          border: 1px solid #444;
          border-radius: 4px;
          padding: 0.5rem;
          font-size: 14px;
        }

        &:empty + .info {
          display: block;
        }
      }

      .members button {
        cursor: pointer;
        border: 0;
        border-radius: 4px;
        padding: 6px 8px;
        background-color: #111;
        color: #fff;
        font-size: 12px;
      }

      .reviews {
        color: hsl(220 70% 35%);
        
        li {
          border-color: currentColor;

          &:has([aria-disabled="true"]) {
            color: hsla(0 0% 15% / 0.5);
          }
        }

        button {
          cursor: pointer;
          border: 0;
          border-radius: 4px;
          padding: 0;
          background-color: transparent;
          color: inherit;
          inline-size: 20px;
          block-size: 20px;

          &[aria-disabled="true"] {
            cursor: not-allowed;
          }

          &:hover:not([aria-disabled="true"]) {
            background-color: hsla(200 50% 50% / 50%);
          }

          svg {
            pointer-events: none;
            inline-size: inherit;
            block-size: inherit;
          }
        }
      }

      .info {
        display: none;
        inline-size: calc(100vw - 60px);
        margin: 0;
        border: 1px solid hsl(186 84% 35%);
        background-color: hsla(186 84% 35% / 5%);
        border-radius: 4px;
        padding: 0.5rem;
        font-size: 14px;
      }
    </style>
  </head>

  <body>

    <section id="practice1">
      <h2>ğŸ§‘â€ğŸ¤â€ğŸ§‘ íŒ€ ë©¤ë²„</h2>	
      <ul class="members">
        <li>ì´ì§€ì•„ <button type="button">ì œê±°</button></li>
        <li>ë°•í˜„ì¼ <button type="button">ì œê±°</button></li>
        <li>ìµœìƒì¤€ <button type="button">ì œê±°</button></li>
        <li>í•˜ì¤€ê²½ <button type="button">ì œê±°</button></li>
      </ul>
      <p class="info">íŒ€ ë©¤ë²„ê°€ ëª¨ë‘ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤. ğŸ˜³</p>
    </section>

    <script>
      // ì‹¤ìŠµ 1. ë©¤ë²„ ì œê±°
      // ê° ë©¤ë²„ì˜ "ì œê±°" ë²„íŠ¼ í´ë¦­ ì‹œ, í•´ë‹¹ ë©¤ë²„ê°€ ì œê±°ë˜ë„ë¡ êµ¬í˜„í•©ë‹ˆë‹¤.
      // - removeChild()
      // - remove()
      ; (() => {
        
        const practice = document.getElementById('practice1')
        const members = practice.querySelector('.members')

        members.addEventListener('click', ({ target }) => {
          const button = target.closest('button')
          if (!button) return
          
          // ì œê±°í• ìš”ì†Œ.ë¶€ëª¨ìš”ì†Œ.removeChild(ì œê±°í• ìš”ì†Œ)
          const parent = button.parentElement
          parent.parentElement.removeChild(parent)

          // ë²„íŠ¼ì˜ ë¶€ëª¨ ìš”ì†Œ ì œê±°(remove)
          // button.parentElement.remove()

          if (members.children.length === 0) {
            members.innerHTML = ''
          }
        })

      })()
    </script>

    <hr />

    <article id="practice2">
      <h2>ğŸ’¬ ë¦¬ë·° ëª©ë¡</h2>	
      <ul class="reviews">
        <li>
          ë§›ì´ ì •ë§ ì¢‹ì•„ìš”!
          <button type="button" aria-disabled="true" aria-label="ìœ„ë¡œ ì´ë™" title="ìœ„ë¡œ ì´ë™">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-square-chevron-up-icon lucide-square-chevron-up"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="m8 14 4-4 4 4"/></svg>
          </button>
        </li>
        <li>
          ë°°ì†¡ë„ ë¹ ë¥´ê³  í¬ì¥ë„ ê¹”ë”í•´ìš”.
          <button type="button" aria-disabled="false" aria-label="ìœ„ë¡œ ì´ë™" title="ìœ„ë¡œ ì´ë™">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-square-chevron-up-icon lucide-square-chevron-up"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="m8 14 4-4 4 4"/></svg>
          </button>
        </li>
        <li>
          ì¡°ë¦¬ë²•ì´ ì‰½ê³  ê°„í¸í•´ì„œ ì¢‹ì•„ìš”~
          <button type="button" aria-disabled="false" aria-label="ìœ„ë¡œ ì´ë™" title="ìœ„ë¡œ ì´ë™">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-square-chevron-up-icon lucide-square-chevron-up"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="m8 14 4-4 4 4"/></svg>
          </button>
        </li>
      </ul>
    </article>

    <script>
      // ì‹¤ìŠµ 2. ìˆœì„œ ì´ë™
      // ê° ë¦¬ë·°ì˜ "ìœ„ë¡œ ì´ë™" ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ìœ„ ìš”ì†Œì™€ ìœ„ì¹˜ê°€ ë°”ë€Œë„ë¡ êµ¬í˜„í•©ë‹ˆë‹¤.
      // - ë§¨ ìœ„ì˜ ë¦¬ë·°ëŠ” ë¹„í™œì„± ìƒíƒœ(`aria-disabled="true"`)ë¡œ ì „í™˜
      // - ë¹„í™œì„± ìƒíƒœì¸ ê²½ìš°, ì´ˆì ì€ ì´ë™ë˜ë‚˜ ì‘ë™ë˜ì§€ ì•Šì•„ì•¼ í•¨
      ;(() => {
        
        const practice = document.getElementById('practice2')

        // ì´ë²¤íŠ¸ ìœ„ì„
        practice.addEventListener('click', ({ target }) => {
          // ì´ë²¤íŠ¸ ëŒ€ìƒ(ë²„íŠ¼) ì°¾ê¸°
          const button = target.closest('button')
          
          // ì´ë²¤íŠ¸ ëŒ€ìƒì´ ë¹„í™œì„± ìƒíƒœì¸ì§€ ì—¬ë¶€
          // ì´ë²¤íŠ¸ ëŒ€ìƒì´ ë²„íŠ¼ì´ ì•„ë‹Œ ê²½ìš°, ê±°ì§“ìœ¼ë¡œ í‰ê°€
          // ì˜µì…”ë„ ì²´ì´ë‹(?.)ì„ ì‚¬ìš©í•´ ëŒ€ìƒì´ nullì¼ ê²½ìš° ê±°ì§“ìœ¼ë¡œ í‰ê°€
          
          const isButtonDisabled = button?.getAttribute('aria-disabled') === 'true'

          // let isButtonDisabled = false
          // if (button && button.getAttribute('aria-disabled') === 'true') {
          //   isButtonDisabled = true
          // }
          
          // ì´ë²¤íŠ¸ ëŒ€ìƒì´ ë²„íŠ¼ì´ ì•„ë‹ˆê±°ë‚˜,
          // ì´ë²¤íŠ¸ ëŒ€ìƒì´ ë²„íŠ¼ì´ì§€ë§Œ ë¹„í™œì„± ìƒíƒœì¸ ê²½ìš° 
          // ë¹ ë¥¸ ë°˜í™˜ìœ¼ë¡œ í•¨ìˆ˜ ì¢…ë£Œ
          if (!button || isButtonDisabled) return
          
          // ì´ë™í•  ë¦¬ë·° ëª©ë¡ ì•„ì´í…œ (í´ë¦­í•œ ë²„íŠ¼ì˜ ë¶€ëª¨ ìš”ì†Œ)
          const moveItem = button.parentElement
          
          // ëŒ€ìƒ ë¦¬ë·° ëª©ë¡ ì•„ì´í…œ (í´ë¦­í•œ ë²„íŠ¼ì˜ ë¶€ëª¨ ìš”ì†Œì˜ ì´ì „ ìš”ì†Œ)
          const targetItem = moveItem.previousElementSibling

          // ëŒ€ìƒ ë¦¬ë·° ëª©ë¡ ì•„ì´í…œì´ ì—†ì„ ê²½ìš° í•¨ìˆ˜ ì¢…ë£Œ
          if (!targetItem) return
          
          // ëŒ€ìƒ ë¦¬ë·° ëª©ë¡ ì•„ì´í…œì˜ ì´ì „ ìš”ì†Œ ì¡´ì¬ ì—¬ë¶€
          const targetItemIsFirst = !targetItem.previousElementSibling

          // ëŒ€ìƒ ë¦¬ë·° ëª©ë¡ ì•„ì´í…œì˜ ì´ì „ ìœ„ì¹˜ë¡œ ì´ë™
          targetItem.before(moveItem)
          
          // ëŒ€ìƒ ë¦¬ë·° ëª©ë¡ ì•„ì´í…œì´ ê°€ì¥ ìƒìœ„ ìœ„ì¹˜ì˜€ë‹¤ë©´
          if (targetItemIsFirst) {
            // ì´ë™í•œ ë¦¬ë·° ëª©ë¡ ì•„ì´í…œì˜ ë²„íŠ¼ ë¹„í™œì„± ìƒíƒœ ë³€ê²½ (ë¹„í™œì„± ìƒíƒœë¡œ)
            button.setAttribute('aria-disabled', 'true')
            // ëŒ€ìƒ ë¦¬ë·° ëª©ë¡ ì•„ì´í…œì˜ ë²„íŠ¼ ì°¾ê¸°
            const targetItemButton = targetItem.querySelector('button')
            // ëŒ€ìƒ ë¦¬ë·° ëª©ë¡ ì•„ì´í…œì˜ ë²„íŠ¼ ë¹„í™œì„± ìƒíƒœ ë³€ê²½ (í™œì„± ìƒíƒœë¡œ)
            targetItemButton.setAttribute('aria-disabled', 'false')
          }

          // ìœ„ì¹˜ ë³€ê²½ í›„ì—ë„ ì´ˆì  ì´ë™ ìƒíƒœê°€ ìœ ì§€ë˜ë„ë¡
          // ì´ë™í•œ ë¦¬ë·° ëª©ë¡ ì•„ì´í…œì˜ ë²„íŠ¼ì— ì´ˆì  ì´ë™
          button.focus()

        })

      })

      ;(() => {
        
        const practice = document.getElementById('practice2')

        practice.addEventListener('click', ({ target }) => {
          // ë‹¤ì‹œ ì‘ì„±í•´ë´…ì‹œë‹¤.
          const button = target.closest('button')

          if (!button) return
          // console.log('ë²„íŠ¼ë§Œ ê°ì§€í•©ë‹ˆë‹¤.')

          // ì´ë™í•  ì•„ì´í…œ ì°¾ê¸°
          const moveItem = button.parentElement

          // ëŒ€ìƒ ì•„ì´í…œ ì°¾ê¸°
          const targetItem = moveItem.previousElementSibling

          // ëŒ€ìƒ ì•„ì´í…œì´ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ í•¨ìˆ˜ ì¢…ë£Œ
          if (!targetItem) return

          // console.log('targetItem', targetItem)
          // console.log('moveItem', moveItem)

          // ëŒ€ìƒìš”ì†Œ.before(ì´ë™ìš”ì†Œ)
          targetItem.before(moveItem)

          // ì´ë™ìš”ì†Œê°€ ê°€ì¥ ìƒìœ„ í˜•ì œì¸ê°€?
          const isFirstMovedItem = !moveItem.previousElementSibling
          
          // ì´ë™ëœ ìš”ì†Œê°€ ê°€ì¥ ìƒìœ„ í˜•ì œë¼ë©´
          if (isFirstMovedItem) {
            // ì´ë™ëœ ìš”ì†Œì˜ ë²„íŠ¼(= ì‚¬ìš©ìê°€ í´ë¦­í•œ ë²„íŠ¼)ì˜ ë¹„í™œì„± ìƒíƒœë¡œ ì „í™˜
            button.setAttribute('aria-disabled', 'true')
            // ì•„ë˜ë¡œ ì´ë™ëœ ìš”ì†Œ(= ëŒ€ìƒ ìš”ì†Œ)ì˜ ë²„íŠ¼ì„ í™œì„± ìƒíƒœë¡œ ì „í™˜
            const targetItemButton = targetItem.querySelector('button')
            targetItemButton.setAttribute('aria-disabled', 'false')
          }

          // ì´ë™ ê¸°ëŠ¥ì´ ì‹¤í–‰ëœ ë²„íŠ¼ì— ì´ˆì  ìœ ì§€
          button.focus()
        })

      })()
    </script>

  </body>

</html>